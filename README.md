# 🎬 Movie Listing System

A full-stack movie listing application built with a secure and modern tech stack. The frontend is a React Single Page Application (SPA) and the backend is a .NET 8 Web API. The system supports both traditional username/password authentication and Single Sign-On (SSO) using Auth0.

---

## 📁 Project Structure

```
movie-listing-system/
│
├── frontend-spa/          # React SPA (Vite or CRA)
│   ├── public/
│   ├── src/
│   └── ...
│
├── backend-api/           # ASP.NET Core 8 Web API
│   ├── Controllers/
│   ├── Models/
│   ├── Data/
│   └── ...
```

---

## 🔐 Authentication Features

- ✅ Username/Password authentication (JWT-based)
- ✅ SSO using **Auth0** (OAuth2 + OpenID Connect)
- ✅ Token validation using **policy scheme**
- ✅ Secure route protection for both frontend and backend

---

## 🚀 Getting Started

### 🔧 Prerequisites

- [.NET 8 SDK](https://dotnet.microsoft.com/en-us/download)
- [Node.js](https://nodejs.org/en)
- [Auth0 Account](https://auth0.com/)
- Git

---

## ⚙️ Backend Setup (.NET Core 8)

### 1. Navigate to backend directory:

```bash
cd backend-api
```

### 2. Update `appsettings.json`

```json
{
  "Jwt": {
    "Key": "<your-local-jwt-secret>",
    "Issuer": "http://localhost:5091",
    "Audience": "http://localhost:5091"
  }
}
```

> 💡 For SSO via Auth0, configure in `Program.cs`:
```csharp
options.Authority = "https://<your-auth0-domain>/";
options.Audience = "https://moviesystem/api";
```

### 3. Run the API

```bash
dotnet run
```

The API should now be available at: `http://localhost:5091/api/movies`

---

## 🧩 Frontend Setup (React SPA)

### 1. Navigate to frontend directory

```bash
cd frontend-spa
```

### 2. Install dependencies

```bash
npm install
```

### 3. Update environment variables in `.env` (create if needed)

```
VITE_API_BASE_URL=http://localhost:5091
VITE_AUTH0_DOMAIN=<your-auth0-domain>
VITE_AUTH0_CLIENT_ID=<your-client-id>
VITE_AUTH0_AUDIENCE=https://moviesystem/api
```

### 4. Start the React app

```bash
npm run dev
```

The app should open at: `http://localhost:3000`

---

## ✅ API Endpoints

| Method | Endpoint             | Description           | Auth Required |
|--------|----------------------|------------------------|----------------|
| GET    | `/api/movies`        | List all movies        | ✅ Yes         |
| POST   | `/api/movies`        | Add new movie          | ✅ Yes         |
| PUT    | `/api/movies/{id}`   | Update movie by ID     | ✅ Yes         |
| DELETE | `/api/movies/{id}`   | Delete movie by ID     | ✅ Yes         |

---

## 🔐 Login Options

- **Local Login** — via custom UI (JWT generated by API)
- **SSO Login** — via Auth0 popup or redirect (OAuth2 flow)
- Frontend stores the token and sends it via `Authorization: Bearer` header

---

## 🔒 Secure CORS Configuration

```csharp
builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowFrontend",
        policy => policy.WithOrigins("http://localhost:3000")
                        .AllowAnyHeader()
                        .AllowAnyMethod());
});
```

---

## 🚪 Logout

```tsx
// React
const handleLogout = () => {
  logout({ returnTo: window.location.origin });
};
```

Backend does not store sessions, so logout is frontend-only (for token-based auth).

---

## 📦 Technologies Used

- ✅ **React 18** (SPA)
- ✅ **.NET 8 Web API**
- ✅ **Auth0** (OAuth2/SSO)
- ✅ **JWT Token Authentication**
- ✅ **Entity Framework Core (In-Memory)**
- ✅ **CORS Policy Setup**
- ✅ **Swagger for API Docs**

---

## 📚 Tutorials / References

- [Auth0 React SDK Docs](https://auth0.com/docs/libraries/auth0-react)
- [ASP.NET Core Authentication](https://learn.microsoft.com/en-us/aspnet/core/security/authentication/)
- [JWT.io Debugger](https://jwt.io/)

---

## 🧪 Future Improvements

- ⏳ Pagination & search filters
- 🧑 Role-based access control (RBAC)
- 🧾 Store tokens in secure storage
- 📦 Switch to SQL Server or PostgreSQL
- 🔐 Add refresh tokens

---

## 🤝 Contributing

1. Fork the repo
2. Create your branch (`git checkout -b feature/foo`)
3. Commit your changes (`git commit -am 'Add new feature'`)
4. Push to the branch (`git push origin feature/foo`)
5. Create a new Pull Request

---

## 📜 License

This project is licensed under the MIT License.